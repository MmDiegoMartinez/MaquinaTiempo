<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Maquina del Tiempo</title>
  <script src="js/aframe.min2.js"></script>
  <script src="js/aframe-extras.min.js"></script>
  <script src="js/aframe-environment-component.min.js"></script>
  <link rel="stylesheet" href="css/Estilos.css">
</head>
<body>
  <div class="menu">
    <div class="formulario">
      <form action="" method="post" onsubmit="handleFormSubmit(event)">
        <label for="anio">Seleccione un periodo:</label>
        <select name="anio" id="anio">
          <option value="1">Periodo Cretácico</option>
          <option value="2">Prehistoria</option>
          <option value="3">Antiguo Egipto</option>
          <option value="4">Actualidad</option>
          <option value="5">Periodo Futurista</option>
          <option value="6">Periodo Postapocalíptico </option>
        </select>
        <button type="submit">Viajar</button>
      </form>
    </div>
  </div>
  <a-scene>
    <a-camera position="-5 2 25"></a-camera>
    <a-assets>
      <a-asset-item id="parte1" src="Modelos/parte1.glb"></a-asset-item>
      <a-asset-item id="parte2" src="Modelos/parte2.glb"></a-asset-item>
      <a-asset-item id="parte3" src="Modelos/parte3.glb"></a-asset-item>
      <a-asset-item id="parte4" src="Modelos/parte4.glb"></a-asset-item>
      <a-asset-item id="mamut" src="Modelos/mamut.glb"></a-asset-item>
    </a-assets>

    <a-entity id="maquina-completa" scale="20 20 20" position="0 20 -5" rotation="0 0 0">
      <a-entity gltf-model="#parte1" position="0 0 0"></a-entity>
      <a-entity gltf-model="#parte2" position="0 0 0"></a-entity>
      <a-entity gltf-model="#parte3" position="0 0 0"></a-entity>
      <a-entity gltf-model="#parte4" position="0 0 0"></a-entity>
    </a-entity>

    <a-entity gltf-model="#mamut"  scale="15 15 15" position="0 3 12 " rotation="0 85 0"></a-entity>
    <a-entity class="flecha" position="-0.6 2.3 6">
      <a-cylinder position="0 0 0" radius="0.05" height="2" rotation="0 90 90" color="#A86D33"></a-cylinder> 
      <a-cone position="0 0 1.5" radius-bottom="0.08" height="1" rotation="0 90 90" color="#C1BAA7"></a-cone>
    </a-entity>

    <a-entity class="flecha" position="-7.6 2.3 4">
      <a-cylinder position="0 0 0" radius="0.05" height="2" rotation="0 90 90" color="#A86D33"></a-cylinder> 
      <a-cone position="0 0 1.5" radius-bottom="0.08" height="1" rotation="0 90 90" color="#C1BAA7"></a-cone>
    </a-entity>

    <a-entity class="flecha" position="-6.6 2.3 -7">
      <a-cylinder position="0 0 0" radius="0.05" height="2" rotation="0 90 90" color="#A86D33"></a-cylinder> 
      <a-cone position="0 0 1.5" radius-bottom="0.08" height="1" rotation="0 90 90" color="#C1BAA7"></a-cone>
    </a-entity>

    <a-entity class="flecha" position="7.4 2.3 -4">
      <a-cylinder position="0 0 0" radius="0.05" height="2" rotation="0 90 90" color="#A86D33"></a-cylinder> 
      <a-cone position="0 0 1.5" radius-bottom="0.08" height="1" rotation="0 90 90" color="#C1BAA7"></a-cone>
    </a-entity>

    <a-entity class="flecha" position="4.4 2.3 2">
      <a-cylinder position="0 0 0" radius="0.05" height="2" rotation="0 90 90" color="#A86D33"></a-cylinder> 
      <a-cone position="0 0 1.5" radius-bottom="0.08" height="1" rotation="0 90 90" color="#C1BAA7"></a-cone>
    </a-entity>

    <a-entity class="flecha" position="-10.6 3.1 2">
      <a-cylinder position="0 0 0" radius="0.05" height="2" rotation="0 90 90" color="#A86D33"></a-cylinder> 
      <a-cone position="0 0 1.5" radius-bottom="0.08" height="1" rotation="0 90 90" color="#C1BAA7"></a-cone>
    </a-entity>


    <a-obj-model src="Modelos/CaveRock02_Obj.obj" position="8 2 -8" scale="0.05 0.05 0.05" rotation ="0 -90 0" color="#DD754C" ></a-obj-model>


    <a-obj-model src="Modelos/pre5.obj" position="-10 -1 -6" scale="0.8 0.8 0.8" rotation ="0 -90 0" color="#16C440" ></a-obj-model>

    <a-obj-model src="Modelos/pre4.obj" position="-2 2.5 -8" scale="1 1 1 " rotation ="0 -90 0" color="#DD754C" ></a-obj-model>

    <a-obj-model src="Modelos/pre3.obj" position="-15 2.5 5" scale="0.05 0.05 0.05" rotation ="0 -90 0" color="#DD754C" ></a-obj-model>

    <a-entity id="humanoOriginal" position="7 0 4">
      <a-cylinder position="-3 1.35 -2" radius="0.32" height="0.8" rotation="0 90 0" material="src: url(img/ropa2.png);"></a-cylinder>
      <a-cylinder position="-2.81 0.8 -2" radius="0.14" height="0.3" rotation="0 90 0" color="#9F4D0F"></a-cylinder> 
      <a-cylinder position="-3.19 0.8 -2" radius="0.14" height="0.3" rotation="0 -90 0" color="#9F4D0F"></a-cylinder> 
      <a-cylinder id="mangaizq" position="-3.4 1.6 -2" radius="0.14" height="0.3" rotation="0 -90 0" color="#FEC8A8"></a-cylinder> 
      <a-cylinder position="-2.6 1.8 -2" radius="0.14" height="0.3" rotation="0 90 45" color="#9F4D0F"></a-cylinder>        
      <a-cylinder id="brazoizq" position="-3.4 1.5 -2" rotation="0 190 0" radius="0.05" height="0.5" color="#FEC8A8"></a-cylinder> 
      <a-cylinder position="-2.6 2 -1.8" rotation="45 0 0" radius="0.05" height="0.5"   color="#FEC8A8"></a-cylinder> 
      <a-sphere position="-3 2.09 -2" radius="0.3" rotation="0 -90 25" material="src: url(img/cara2.png);"></a-sphere> 
      <a-sphere id="manoizq" position="-3.4 1.3 -2" radius="0.1" color="#E8BEAC"></a-sphere> 
      <a-sphere position="-2.6 2.2 -1.6" rotation="0 0 45" radius="0.1" color="#E8BEAC"></a-sphere> 
      <a-cylinder id="leftLeg" position="-2.81 0.5 -2" rotation="0 0 0" radius="0.1" height="0.6" color="#FEC8A8"></a-cylinder> 
      <a-cylinder id="rightLeg" position="-3.19 0.5 -2" rotation="0 0 0" radius="0.1" height="0.6" color="#FEC8A8"></a-cylinder> 
      <a-sphere position="-2.81 0.1 -2" radius="0.1" color="#FEC8A8"></a-sphere> 
      <a-sphere position="-3.19 0.1 -2" radius="0.1" color="#FEC8A8"></a-sphere> 
    </a-entity>
    <a-entity id="viajante" position="3 20 1.5">
      <a-cylinder position="-3 1.35 -2" radius="0.32" height="0.8" rotation="0 90 0" material="src: url(img/ropa.png);"></a-cylinder>
      <a-cylinder position="-2.81 0.8 -2" radius="0.14" height="0.3" rotation="0 90 0" material="src: url(img/fut/manganiupi.png);"></a-cylinder> 
      <a-cylinder position="-3.19 0.8 -2" radius="0.14" height="0.3" rotation="0 -90 0" material="src: url(img/fut/manganiupi.png);"></a-cylinder> 
      <a-cylinder position="-3.4 1.6 -2" radius="0.14" height="0.3" rotation="0 -90 0" color="#532182"></a-cylinder> 
      <a-cylinder position="-2.6 1.6 -2" radius="0.14" height="0.3" rotation="0 90 0" color="#532182"></a-cylinder>        
      <a-cylinder position="-3.4 1.5 -2" rotation="0 190 0" radius="0.05" height="0.5" color="black"></a-cylinder> 
      <a-cylinder position="-2.6 1.5 -2" rotation="0 190 0" radius="0.05" height="0.5" color="black"></a-cylinder> 
      <a-sphere position="-3 2.09 -2" radius="0.3" rotation="0 -90 0" material="src: url(img/cara.png);"></a-sphere> 
      <a-sphere position="-3.4 1.3 -2" radius="0.1" color="#E8BEAC"></a-sphere> 
      <a-sphere position="-2.6 1.3 -2" radius="0.1" color="#E8BEAC"></a-sphere> 
      <a-cylinder id="leftLeg" position="-2.81 0.5 -2" rotation="0 0 0" radius="0.1" height="0.6" color="black"></a-cylinder> 
      <a-cylinder id="rightLeg" position="-3.19 0.5 -2" rotation="0 0 0" radius="0.1" height="0.6" color="black"></a-cylinder> 
      <a-sphere position="-2.81 0.1 -2" radius="0.1" color="#E8BEAC"></a-sphere> 
      <a-sphere position="-3.19 0.1 -2" radius="0.1" color="#E8BEAC"></a-sphere> 
    </a-entity>
    <a-entity environment="preset: yavapai; skyType: gradient; ground: hills; groundColor: #7e6b5a; groundColor2: #9b7f6c; dressing: stones; dressingAmount: 50; dressingScale: 3;"></a-entity>
    <a-entity light="type: ambient; intensity: 0.5;"></a-entity>
    <a-light type="directional"
             light="castShadow: true;
                    shadowMapHeight: 1024;
                    shadowMapWidth: 1024;
                    shadowCameraLeft: -7;
                    shadowCameraRight: 5;
                    shadowCameraBottom: -5;
                    shadowCameraTop: 5;"
             position="-5 3 1.5"></a-light>
  </a-scene>
  <audio id="audio" src="Audios/prehistoria_1.mp3"></audio>
  <audio id="audio-maquina" src="Audios/maquinatiempo.mp3"></audio>
  <audio id="audio-maquina2" src="Audios/desaparecer.mp3"></audio>
</body>
<script src="js/aterrizaje.js"></script>
<script src="js/activarformulario.js"></script>
<script src="js/sonidos.js"></script>

<script>
  function animarpre(brazo, mano, manga) {
    brazo.setAttribute('position', '-3.4 1.5 -2');
    brazo.setAttribute('rotation', '0 190 0');
    mano.setAttribute('position', '-3.4 1.3 -2');
    manga.setAttribute('position', '-3.4 1.6 -2');
    manga.setAttribute('rotation', '0 -90 0');
    setTimeout(function () {
        brazo.setAttribute('position', '-3.4 1.8 -2');
        brazo.setAttribute('rotation', '0 190 -45');
        mano.setAttribute('position', '-3.6 2 -2');
        manga.setAttribute('position', '-3.35 1.7 -2');
        manga.setAttribute('rotation', '40 -90 0');
    }, 500);
    setTimeout(function () {
        animarpre(brazo, mano, manga);
    }, 1000);
}

function aplicarAnimacionPrincipal() {
    var brazoPrincipal = document.getElementById('brazoizq');
    var manoPrincipal = document.getElementById('manoizq');
    var mangaPrincipal = document.getElementById('mangaizq');

    animarpre(brazoPrincipal, manoPrincipal, mangaPrincipal);
}

aplicarAnimacionPrincipal();

document.addEventListener('DOMContentLoaded', function () {
    var humanoOriginal = document.getElementById('humanoOriginal');
    var scene = document.querySelector('a-scene');

    var coordenadas = [
        { x: -5, y: 0, z: 6 },
        { x: 10, y: 0, z: -2 },
        { x: 2, y: 0, z: 8 },
        { x: -4, y: 0, z: -5 },
        { x: -8, y: 0.8, z: 4 }
    ];

    for (var i = 0; i < coordenadas.length; i++) {
        var humanoClon = humanoOriginal.cloneNode(true);
        humanoClon.setAttribute('position', coordenadas[i].x + ' ' + coordenadas[i].y + ' ' + coordenadas[i].z);
        scene.appendChild(humanoClon);
        var brazo = humanoClon.querySelector('#brazoizq');
        var mano = humanoClon.querySelector('#manoizq');
        var manga = humanoClon.querySelector('#mangaizq');
        animarpre(brazo, mano, manga);
    }
});

function animarMamut() {
    var mamut = document.querySelector('[gltf-model="#mamut"]');
    mamut.setAttribute('position', '0 3 12');
    mamut.setAttribute('rotation', '0 85 45');

    setTimeout(function() {
        mamut.setAttribute('position', '0 2 12');
        mamut.setAttribute('rotation', '0 85 0');
        setTimeout(animarMamut, 3000);
    }, 4000);
}

animarMamut();

</script>
</html>
