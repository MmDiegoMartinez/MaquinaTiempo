<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Maquina del Tiempo</title>
  <script src="js/aframe.min2.js"></script>
  <script src="js/aframe-extras.min.js"></script>
  <script src="js/aframe-environment-component.min.js"></script>
  <link rel="stylesheet" href="css/Estilos.css">
</head>
<body>
  <div class="menu">
    <div class="formulario">
      <form action="" method="post" onsubmit="handleFormSubmit(event)">
        <label for="anio">Seleccione un periodo:</label>
        <select name="anio" id="anio">
          <option value="1">Periodo Cretácico</option>
          <option value="2">Prehistoria</option>
          <option value="3">Antiguo Egipto</option>
          <option value="4">Actualidad</option>
          <option value="5">Periodo Futurista</option>
          <option value="6">Periodo Postapocalíptico </option>
        </select>
        <button type="submit">Viajar</button>
      </form>
    </div>
  </div>
  <a-scene>
    <a-camera position="0 2 20"></a-camera>
    
    <a-entity environment="preset: threetowers; lighting: none; shadow: none; lightPosition: 0 2.15 0" hide-in-ar-mode></a-entity>

    <a-entity light="type: ambient; intensity: 0.5;"></a-entity>
    <a-light type="directional"
             light="castShadow: true;
                    shadowMapHeight: 1024;
                    shadowMapWidth: 1024;
                    shadowCameraLeft: -7;
                    shadowCameraRight: 5;
                    shadowCameraBottom: -5;
                    shadowCameraTop: 5;"
             position="-5 3 1.5"></a-light>
  <a-assets>
    <a-assets>
      <a-asset-item id="parte1" src="Modelos/parte1.glb"></a-asset-item>
      <a-asset-item id="parte2" src="Modelos/parte2.glb"></a-asset-item>
      <a-asset-item id="parte3" src="Modelos/parte3.glb"></a-asset-item>
      <a-asset-item id="parte4" src="Modelos/parte4.glb"></a-asset-item>
      <a-asset-item id="nave" src="Modelos/Modelo/scene.gltf"></a-asset-item> 
      <a-asset-item id="robot" src="Modelos/robot_operator.glb"></a-asset-item> 
    </a-assets>
  </a-assets>

  <a-obj-model src="Modelos/SHIP.obj" position="0 50 -150" scale="0.02 0.02 0.02" rotation ="0 0 0" material="src: url(img/nave.png);"  
  animation="property: position; to: 0 45 150; dur: 30000; easing: linear; loop: true"></a-obj-model>
  
  <a-obj-model src="Modelos/SHIP.obj" position="-80 65 0" scale="0.02 0.02 0.02" rotation ="0 90 0" material="src: url(img/nave.png);"   
  animation="property: position; to: 150 60 0; dur: 50000; easing: linear; loop: true"></a-obj-model>

  <a-obj-model src="Modelos/SHIP.obj" position="150 80 10" scale="0.02 0.02 0.02" rotation ="0 -90 0" material="src: url(img/nave.png);" 
  animation="property: position; to: -150 60 10; dur:  90000; easing: linear; loop: true"></a-obj-model>

  
  <a-entity gltf-model="#robot" position="-100 0 -50" scale="5 5 5" rotation="0 0 0"
  animation="property: position; to: 150 0 -50; dur: 95000; easing: linear; loop: true"></a-entity>

  <a-entity gltf-model="#robot" position="100 0 -40" scale="5 5 5" rotation="0 180 0"
  animation="property: position; to: -150 0 -40; dur: 105000; easing: linear; loop: true"></a-entity>
 
  <a-entity gltf-model="#robot" position="0 0 -10 " scale="5 5 5" rotation=" 0 -90 0"></a-entity>
  
  
  
  <a-entity id="maquina-completa" scale="20 20 20" position="0 20 -5" rotation="0 0 0">
    <a-entity gltf-model="#parte1" position="0 0 0"></a-entity>
    <a-entity gltf-model="#parte2" position="0 0 0"></a-entity>
    <a-entity gltf-model="#parte3" position="0 0 0"></a-entity>
    <a-entity gltf-model="#parte4" position="0 0 0"></a-entity>
  </a-entity>

    <a-entity id="viajante" position="3 20 1.5">
      <a-cylinder position="-3 1.35 -2" radius="0.32" height="0.8" rotation="0 90 0" material="src: url(img/ropa.png);"></a-cylinder> <!-- Cuerpo -->
      <a-cylinder position="-2.81 0.8 -2" radius="0.14" height="0.3" rotation="0 90 0" material="src: url(img/fut/manganiupi.png);"></a-cylinder> 
      <a-cylinder position="-3.19 0.8 -2" radius="0.14" height="0.3" rotation="0 -90 0" material="src: url(img/fut/manganiupi.png);"></a-cylinder> 
      <a-cylinder position="-3.4 1.6 -2" radius="0.14" height="0.3" rotation="0 -90 0" color="#532182"></a-cylinder> <!-- MANGAS -->
      <a-cylinder position="-2.6 1.6 -2" radius="0.14" height="0.3" rotation="0 90 0" color="#532182"></a-cylinder> <!-- MANGAS -->       
      <a-cylinder position="-3.4 1.5 -2" rotation="0 190 0" radius="0.05" height="0.5" color="black"></a-cylinder> <!-- Brazo izquierdo -->
      <a-cylinder position="-2.6 1.5 -2" rotation="0 190 0" radius="0.05" height="0.5" color="black"></a-cylinder> <!-- Brazo derecho -->
      <a-sphere position="-3 2.09 -2" radius="0.3" rotation="0 -90 0" material="src: url(img/cara.png);"></a-sphere> <!-- Cabeza -->
      <a-sphere position="-3.4 1.3 -2" radius="0.1" color="#E8BEAC"></a-sphere> <!-- Mano izquierda -->
      <a-sphere position="-2.6 1.3 -2" radius="0.1" color="#E8BEAC"></a-sphere> <!-- Mano derecha -->
      <a-cylinder id="leftLeg" position="-2.81 0.5 -2" rotation="0 0 0" radius="0.1" height="0.6" color="black"></a-cylinder> <!-- Pierna derecha -->
      <a-cylinder id="rightLeg" position="-3.19 0.5 -2" rotation="0 0 0" radius="0.1" height="0.6" color="black"></a-cylinder> <!-- Pierna izquierda -->
      <a-sphere position="-2.81 0.1 -2" radius="0.1" color="#E8BEAC"></a-sphere> 
      <a-sphere position="-3.19 0.1 -2" radius="0.1" color="#E8BEAC"></a-sphere> 
    </a-entity>
  </a-scene>
  <audio id="audio" src="Audios/futurista_1.mp3"></audio>
  <audio id="audio-maquina" src="Audios/maquinatiempo.mp3"></audio>
  <audio id="audio-maquina2" src="Audios/desaparecer.mp3"></audio>
  <script src="js/aterrizaje.js"></script>
  <script src="js/activarformulario.js"></script>
  <script src="js/sonidos.js"></script>
</body>

<script>
  AFRAME.registerComponent('loop-animation', {
    init: function () {
      const el = this.el;

      const animate = () => {
        el.setAttribute('animation', {
          property: 'position',
          to: '0 45 100',
          dur: 20000,
          easing: 'linear',
          loop: false
        });

        el.addEventListener('animationcomplete', function () {
          el.setAttribute('position', '0 45 -100'); 
          animate(); 
        }, { once: true });
      };

      animate();
    }
  });

  document.addEventListener('DOMContentLoaded', function () {
    document.querySelector('#nave').setAttribute('loop-animation', '');
  });
</script>

</html>