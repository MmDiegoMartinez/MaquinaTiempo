<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Cretacico</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/Estilos.css">
    <script src="js/aframe.min2.js"></script>
    <script src="js/aframe-extras.min.js"></script>
    <script src="js/aframe-environment-component.min.js"></script>
  </head>  
  <body>
    <div class="menu">
      <div class="formulario">
        <form action="" method="post" onsubmit="handleFormSubmit(event)">
          <label for="anio">Seleccione un periodo:</label>
          <select name="anio" id="anio">
            <option value="1">Periodo Cretácico</option>
            <option value="2">Prehistoria</option>
            <option value="3">Antiguo Egipto</option>
            <option value="4">Actualidad</option>
            <option value="5">Periodo Futurista</option>
            <option value="6">Periodo Postapocalíptico </option>
          </select>
          <button type="submit">Viajar</button>
        </form>
      </div>
    </div>

    <a-scene>
      <a-camera position="-5 2 15"></a-camera>
      <a-assets>
        
        <a-asset-item id="spinosaurus" src="Modelos/dino-model.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="trex" id="rex" src="Modelos/T-rex.glb"></a-asset-item>
        <a-asset-item id="Quetzalcoatlus" id="quet" src="Modelos/Quetzalcoatlus.glb"></a-asset-item>
        <a-asset-item id="parte1" src="Modelos/parte1.glb"></a-asset-item>
        <a-asset-item id="parte2" src="Modelos/parte2.glb"></a-asset-item>
        <a-asset-item id="parte3" src="Modelos/parte3.glb"></a-asset-item>
        <a-asset-item id="parte4" src="Modelos/parte4.glb"></a-asset-item>
      </a-assets>
    </a-assets>

    <a-entity id="maquina-completa" scale="20 20 20" position="0 20 -5" rotation="0 0 0">
      <a-entity gltf-model="#parte1" position="0 0 0"></a-entity>
      <a-entity gltf-model="#parte2" position="0 0 0"></a-entity>
      <a-entity gltf-model="#parte3" position="0 0 0"></a-entity>
      <a-entity gltf-model="#parte4" position="0 0 0"></a-entity>
    </a-entity>

      <a-entity id="viajante" position="3 20 1.5">
        <a-cylinder position="-3 1.35 -2" radius="0.32" height="0.8" rotation="0 90 0" material="src: url(img/ropa.png);" ></a-cylinder> <!-- Cuerpo -->
        <a-cylinder position="-2.81 0.8 -2" radius="0.14" height="0.3" rotation="0 90 0" material="src: url(img/fut/manganiupi.png);"></a-cylinder> 
        <a-cylinder position="-3.19 0.8 -2" radius="0.14" height="0.3" rotation="0 -90 0" material="src: url(img/fut/manganiupi.png);"></a-cylinder> 
        <a-cylinder position="-3.4 1.6 -2" radius="0.14" height="0.3" rotation="0 -90 0" color="#532182"></a-cylinder> <!-- MANGAS -->
        <a-cylinder position="-2.6 1.6 -2" radius="0.14" height="0.3" rotation="0 90 0" color="#532182"></a-cylinder> <!-- MANGAS -->       
        <a-cylinder position="-3.4 1.5 -2" rotation="0 190 0" radius="0.05" height="0.5" color="black"></a-cylinder> <!-- Brazo izquierdo -->
        <a-cylinder position="-2.6 1.5 -2" rotation="0 190 0" radius="0.05" height="0.5" color="black"></a-cylinder> <!-- Brazo derecho -->
        <a-sphere position="-3 2.09 -2" radius="0.3" rotation="0 -90 0" material="src: url(img/cara.png);" ></a-sphere> <!-- Cabeza -->
        <a-sphere position="-3.4 1.3 -2" radius="0.1" color="#E8BEAC"></a-sphere> <!-- Mano izquierda -->
        <a-sphere position="-2.6 1.3 -2" radius="0.1" color="#E8BEAC"></a-sphere> <!-- Mano derecha -->
        <a-cylinder id="leftLeg" position="-2.81 0.5 -2" rotation="0 0 0" radius="0.1" height="0.6" color="black"></a-cylinder> <!-- Pierna derecha -->
        <a-cylinder id="rightLeg" position="-3.19 0.5 -2" rotation="0 0 0" radius="0.1" height="0.6" color="black"></a-cylinder> <!-- Pierna izquierda -->
        <a-sphere position="-2.81 0.1 -2" radius="0.1" color="#E8BEAC"></a-sphere> 
        <a-sphere position="-3.19 0.1 -2" radius="0.1" color="#E8BEAC"></a-sphere> 
      </a-entity>

      <a-entity gltf-model="#trex" id="rex" scale="40 40 40" position="4 0 10" rotation="0 150 0"></a-entity>
      <a-entity gltf-model="#trex" id="rex" scale="40 40 40" position="-15 0 -2" rotation="0 75 0"></a-entity>
      <a-entity gltf-model="#Quetzalcoatlus" id="quet" scale="0.01 0.01 0.01" position="0 30 0" rotation="0 180 0"></a-entity>
      <a-entity gltf-model="#Quetzalcoatlus" id="quet2" scale="0.01 0.01 0.01" position="-150 0 0" rotation="0 0 0"
      animation="property: position; to: 150 30 0; dur: 30000; easing: linear; loop: true"></a-entity>

      <a-entity environment="preset: forest; skyType: atmosphere; ground: hills; groundColor: #65533e; groundColor2: #887a51; dressing: trees; dressingAmount: 50; dressingScale: 3;"></a-entity>

      <a-entity id="dino" position="-1 0 -10" scale="0.5 0.5 0.5">
        <a-entity position="-15 2.15 0" rotation="0 55 0"
                  gltf-model="#spinosaurus"
                  animation-mixer
                  shadow="cast: true; receive: false"></a-entity>
      </a-entity>  

      <a-entity id="dino" position="-1 0 -10" scale="0.4 0.4 0.4">
        <a-entity position="-5 2.15 40" rotation="0 55 0"
                  gltf-model="#spinosaurus"
                  animation-mixer
                  shadow="cast: true; receive: false"></a-entity>
      </a-entity>  

      <a-entity light="type: ambient; intensity: 0.5;"></a-entity>
      <a-light type="directional"
               light="castShadow: true;
                      shadowMapHeight: 1024;
                      shadowMapWidth: 1024;
                      shadowCameraLeft: -7;
                      shadowCameraRight: 5;
                      shadowCameraBottom: -5;
                      shadowCameraTop: 5;"
               id="light"
               target="dino"
               position="-5 3 1.5"></a-light>

      <a-plane height="15" width="15" position="0 0 -3" rotation="-90 0 0"
               shadow="receive: true"
               ar-shadows="opacity: 0.3"
               visible="false"></a-plane>
    </a-scene>
    <audio id="audio" src="Audios/cretacico_1.mp3"></audio>
    <audio id="audio-maquina" src="Audios/maquinatiempo.mp3"></audio>
    <audio id="audio-maquina2" src="Audios/desaparecer.mp3"></audio>
    
  </body>
  
  <script src="js/aterrizaje.js"></script>
  <script src="js/activarformulario.js"></script>
  <script src="js/sonidos.js"></script>

  <script>
    AFRAME.registerComponent('fly-quetzalcoatlus', {
  init: function () {
    var el = this.el; // Elemento <a-entity> al que se aplica este componente

    // Animación de movimiento continuo de avance (hacia adelante)
    el.setAttribute('animation__forward', {
      property: 'position',
      to: '100 5 -100',
      loop: true,
      dur: 5000, // Duración de la animación en milisegundos
      easing: 'linear' // Movimiento uniforme para simular vuelo
    });

    // Animación de rotación continua en el eje Y
    el.setAttribute('animation__rotation', {
      property: 'rotation',
      to: '0 1080 0',
      loop: true,
      dur: 10000 // Duración de la animación en milisegundos
    });

    // Animación de ascenso y descenso suave
    el.setAttribute('animation__altitude', {
      property: 'position',
      to: '100 10 -100',
      dir: 'alternate',
      loop: true,
      dur: 10000, // Duración de la animación en milisegundos
      easing: 'easeInOutQuad' // Movimiento más suave
    });
  }
});

// Selecciona el elemento <a-entity> con id "quet" y aplica el componente de animación
document.querySelector('#quet').setAttribute('fly-quetzalcoatlus', '');





  </script>
  

</html>
